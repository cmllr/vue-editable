/**
MIT License

Copyright (c) 2017 Christoph MÃ¼ller
**/
editable={created:function(){console.log(this)},css:{input:"form-control vue-editable-input",hidden:"vue-editable-hidden",editable:"vue-editable-can-edit"},id:"_vue_editable_",openInput:null,parent:null,install:function(e,t){void 0!==t&&null!==t&&void 0!==t.css&&null!==t.css&&(this.css=t.css);var i=this;Vue.directive("editable",{inserted:function(e,t,a,n){var r=t.expression,l=(null===e.getAttribute("data-type")||e.getAttribute("data-type"),{});if(e.attributes.length>0)for(var d in Object.keys(e.attributes)){var u=e.attributes[d].name;if(-1!==u.indexOf("data-")){var b=e.attributes[d].value;l[u.replace("data-","")]=b}}e.onclick=function(){i.getInput(e,r,l)},e.setAttribute("class",null!==e.getAttribute("class")?+e.getAttribute("class")+editable.css.editable:editable.css.editable)}})},getInput:function(e,t,i){if(null===editable.openInput){editable.openInput=e;var a=null!==e.getAttribute("class")?e.getAttribute("class"):"";a+=" "+editable.css.hidden,e.setAttribute("class",a);var n=document.createElement("input");for(var r in i)n.setAttribute(r,i[r]);n.setAttribute("class",editable.css.input),n.setAttribute("id",this.id),n.setAttribute("v-editable-target",t),null!==e.getAttribute("data-index")&&n.setAttribute("data-index",e.getAttribute("data-index"));var l=this.getPropertyValue(t,e.getAttribute("data-index"));null!==e.getAttribute("data-property")?(n.setAttribute("data-property",e.getAttribute("data-property")),n.value=l[e.getAttribute("data-property")]):n.value=l,n.onkeydown=this.rebind,e.appendChild(n),editable.emitOpenedEvent(e),n.focus()}},convertType:function(e,t){if("object"==typeof e)return t;var i=Number(e)===e&&e%1==0,a=Number(e)===e&&e%1!=0;return i?parseInt(t):a?parseFloat(t):t},getPropertyValue:function(e,t){var i=null;if(-1!==e.indexOf("."))for(var a=this.parent,n=e.split("."),r=0;r<n.length;r++){var l=n[r];if("object"!=typeof a[l]){i=a[l];break}a=a[l]}else i=this.parent[e];return null!==t?i[t]:i},getIndex:function(e){return null===e.getAttribute("data-index")?-1:parseInt(e.getAttribute("data-index"))},rebind:function(e){var t=document.getElementById(this.id),i=editable.getIndex(e.srcElement);if(13===e.which){var a=t.value,n=t.getAttribute("v-editable-target"),r=null,l=null,d=null;if(editable.openInput.removeChild(t),-1!==n.indexOf(".")){for(var u=editable.parent,b=n.split("."),s=0;s<b.length;s++){var p=b[s];if("object"!=typeof u[p]){r=editable.deref(u),u[p]=editable.convertType(u[p],a),l=editable.deref(u);break}u=u[p]}d="deep-property"}else if(-1!==i)if(null!==t.getAttribute("data-property")){var o=editable.parent[n][i],c=t.getAttribute("data-property");r=editable.deref(o),o[c]=editable.convertType(o[c],a),l=editable.deref(o),d="property-in-array",Vue.set(editable.parent[n],i,o)}else{r=editable.deref(editable.parent[n][i]);l=editable.convertType(r,a),d="element-in-array",Vue.set(editable.parent[n],i,l)}else r=editable.parent[n],l=editable.convertType(editable.parent[n],a),d="property",editable.parent[n]=l;editable.emitChangedEvent(r,l,d),editable.openInput.setAttribute("class",editable.openInput.getAttribute("class").replace(editable.css.hidden,"").trim()),editable.openInput=null}27===e.which&&(editable.openInput.removeChild(t),editable.emitAbortedEvent(t),editable.openInput.setAttribute("class",editable.openInput.getAttribute("class").replace(editable.css.hidden,"").trim()),editable.openInput=null)},emitChangedEvent:function(e,t,i){editable.parent.$emit("editable-changed",{oldValue:editable.deref(e),newValue:editable.deref(t),changeReason:i})},emitAbortedEvent:function(e){editable.parent.$emit("editable-aborted",{element:e})},emitOpenedEvent:function(e){editable.parent.$emit("editable-opened",{element:e})},deref:function(e){return JSON.parse(JSON.stringify(e))}};